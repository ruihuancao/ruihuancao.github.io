<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="ReactNative开发"/>




  <meta name="keywords" content="ReactNative, 散落的蒲公英" />










  <link rel="alternate" href="/default" title="散落的蒲公英">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.1" />



<link rel="canonical" href="https://ruihuancao.github.io/2016/05/03/ReactNative开发/"/>



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css" />



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.1" />



  



  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>








<script>
  window.config = {"title":"散落的蒲公英","subtitle":"万物之中，希望至美；至美之物，永不凋零","description":"我们就这样一起到老吧","author":"曹瑞环","language":"zh-CN","timezone":null,"url":"https://ruihuancao.github.io","root":"/","permalink":":year/:month/:day/:title/","permalink_defaults":null,"source_dir":"source","public_dir":"public","tag_dir":"tags","archive_dir":"archives","category_dir":"categories","code_dir":"downloads/code","i18n_dir":":lang","skip_render":null,"new_post_name":":title.md","default_layout":"post","titlecase":false,"external_link":true,"filename_case":0,"render_drafts":false,"post_asset_folder":false,"relative_link":false,"future":true,"highlight":{"enable":true,"auto_detect":true,"line_number":false,"tab_replace":null},"default_category":"uncategorized","category_map":null,"tag_map":null,"date_format":"YYYY-MM-DD","time_format":"HH:mm:ss","per_page":15,"pagination_dir":"page","theme":"even","deploy":{"type":"git","repo":"git@github.com:ruihuancao/ruihuancao.github.io.git","branch":"master"},"ignore":[],"avatar":"/images/avatar.png","favicon":"/favicon.ico","archive_generator":{"per_page":20,"yearly":true,"monthly":true,"daily":false},"category_generator":{"per_page":20},"index_generator":{"per_page":20,"order_by":"-date"},"tag_generator":{"per_page":20},"marked":{"gfm":true,"pedantic":false,"sanitize":false,"tables":true,"breaks":true,"smartLists":true,"smartypants":true,"modifyAnchors":"","autolink":true},"server":{"port":4000,"log":false,"compress":false,"header":true},"since":2015,"rss":"default","menu":{"Home":"/","Archives":"/archives/","Categories":"/categories/","Tags":"/tags"},"color":"cobalt blue","mode":"default","toc":true,"fancybox":true,"pjax":true,"copyright":{"enable":false,"license":"<a rel=\"license\" href=\"http://creativecommons.org/licenses/by-nc/4.0/\" target=\"_blank\">知识共享署名-非商业性使用 4.0 国际许可协议</a>"},"reward":{"enable":false,"qrCode":{"wechat":null,"alipay":null}},"social":{"email":"ruihuancao@email.com","github":"https://github.com/ruihuancao"},"leancloud":{"app_id":null,"app_key":null},"baidu_analytics":null,"baidu_verification":null,"google_analytics":null,"google_verification":null,"disqus_shortname":null,"changyan":{"appid":null,"appkey":null},"livere_datauid":null,"version":"2.10.1"};
</script>

    <title> ReactNative开发 - 散落的蒲公英 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">散落的蒲公英</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/categories/">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">散落的蒲公英</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              标签
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          ReactNative开发
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-05-03
        </span>
        
          <span class="post-category">
            
              <a href="/categories/ReactNative/">ReactNative</a>
            
          </span>
        
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#重要"><span class="toc-text">重要</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#环境配置及运行hello-world"><span class="toc-text">环境配置及运行hello world</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#调试"><span class="toc-text">调试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#打包"><span class="toc-text">打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#现有应用中移植入ReactNative"><span class="toc-text">现有应用中移植入ReactNative</span></a></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <p>ReactNative<br>主要思想：组件化，跨平台</p>
<a id="more"></a>
<h2 id="重要"><a href="#重要" class="headerlink" title="重要"></a>重要</h2><p>  当前问题很多，资料相对较少，出问题解决查找方式<br>  1 第一个一定是查找官方文档， 不同版本出入很大，官方文档更准确（不要看国内翻译，翻译存在不一定是最新的），文档更新比较慢<br>  2 google <a href="http://stackoverflow.com/" target="_blank" rel="noopener">http://stackoverflow.com/</a>  github</p>
<h2 id="环境配置及运行hello-world"><a href="#环境配置及运行hello-world" class="headerlink" title="环境配置及运行hello world"></a>环境配置及运行hello world</h2><p>  环境配置参考以下网址：<a href="https://facebook.github.io/react-native/docs/getting-started.html" target="_blank" rel="noopener">https://facebook.github.io/react-native/docs/getting-started.html</a><br>  最新版本0.26.0,maven当前最新是0.20.1 版本不兼容，看清楚自己的js中版本和客户端中版本一致<br>  要使用0.26.0 参看<br>  ubuntu14.04 测试配置问题少了很多坑，也详细了很多<br>  ide选择：sublime,webstorm,Nuclide(官方推荐),安装方式查看对应官方文档</p>
<p>  Nuclide安装：</p>
<ul>
<li>1 常规安装 <a href="https://nuclide.io/docs/editor/setup/#linux" target="_blank" rel="noopener">https://nuclide.io/docs/editor/setup/#linux</a></li>
<li>2 源码安装<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">https</span>://github.com/facebook/nuclide.git</span><br><span class="line">cd nuclide</span><br><span class="line">npm install</span><br><span class="line">apm link</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><p>  按照官方文档配置:<a href="https://facebook.github.io/react-native/docs/running-on-device-android.html#content" target="_blank" rel="noopener">https://facebook.github.io/react-native/docs/running-on-device-android.html#content</a><br>  <figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">react-<span class="keyword">native</span> init newproject <span class="comment">//创建新项目</span></span><br><span class="line">npm install</span><br><span class="line">react-<span class="keyword">native</span> run-android</span><br><span class="line">adb <span class="keyword">reverse</span> tcp:<span class="number">8081</span> tcp:<span class="number">8081</span> <span class="comment">//设置adb端口（5.0以下系统会出错，节省时间，直接换5.0以上系统调试）</span></span><br></pre></td></tr></table></figure></p>
<p>  摇一摇打开调试模式：reload js<br><figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line">echo <span class="number">256</span> | sudo tee -a /<span class="keyword">proc</span>/sys/fs/inotify/max_user_instances</span><br><span class="line">echo 32768 |<span class="title"> sudo</span> tee -a /<span class="keyword">proc</span>/sys/fs/inotify/max_queued_events</span><br><span class="line">echo 65536 |<span class="title"> sudo</span> tee -a /<span class="keyword">proc</span>/sys/fs/inotify/max_user_watches</span><br><span class="line">watchman<span class="title"> shutdown-server</span></span><br></pre></td></tr></table></figure></p>
<p>  备注： 查看logcat日志 或者界面日志如果下载bundle 文件地址不对<br>  在调试模式下设置主机地址及端口号：  电脑ip:8081 (ubuntu 使用ifconfig 查看ip地址)</p>
<p>  Chrome开发调试工具： <a href="http://localhost:8081/debugger-ui" target="_blank" rel="noopener">http://localhost:8081/debugger-ui</a></p>
<h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p>  react-native bundle 生成bundle文件及所使用的资源文件 打包时加入Android 项目<br>  react-native bundle  –platform “android”  –entry-file index.android.js –bundle-output app/src/main/assets/index.android.bundle  –assets-dest app/src/main/res/ –dev true</p>
<p>##小结：<br>   reactnative 通信模型：<br>   java(native端Android实现)<-->Bridge(reactnative 实现)<---> JavaScript<br>   这种实现方式在Android 系统实现是Webview (底层实现WebKit 4.4之后换成Chromium，Chromium基本还是webkit变种)<br>   java <-->(c,c++(bridge<-->webkit))<-->JavaScript</--></--></--></---></--></p>
<p>   JavaScript实现的组件打包成bundle文件<br>   对于Android来说实际上使用的是index.android.bundle文件<br>   开本地npm 只是为了调试实时刷新<br>   发布参见打包</p>
<h2 id="现有应用中移植入ReactNative"><a href="#现有应用中移植入ReactNative" class="headerlink" title="现有应用中移植入ReactNative"></a>现有应用中移植入ReactNative</h2><p>  参见这个文档（注意reactnative版本号,保持一致，版本不同，使用可能不同）<br>  <a href="https://facebook.github.io/react-native/docs/embedded-app-android.html#content" target="_blank" rel="noopener">https://facebook.github.io/react-native/docs/embedded-app-android.html#content</a><br>  流程：</p>
<ul>
<li>1 新建一个Android 项目，并运行</li>
<li>2 引入react native依赖,配置权限</li>
<li>3 使用ReactRootView呈现</li>
<li>4 添加js</li>
</ul>

      
    </div>

    
      
      



      
      
    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/ReactNative/">ReactNative</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2016/06/17/Android Handler机制/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Android Handler机制</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    
    
      <a class="next" href="/2016/04/15/Android自动化构建/">
        <span class="next-text nav-default">Android自动化构建</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  

  



    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.1"></script>

  </body>
</html>
